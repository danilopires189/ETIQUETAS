<!doctype html>
<html lang="pt-br">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hub de Etiquetas - Pague Menos</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
  <link rel="stylesheet" href="shared/design-system.css">
  <link rel="stylesheet" href="shared/components.css">
  <link rel="stylesheet" href="shared/performance.css">
  <script src="config/contador-config.js"></script>
  <script src="shared/contador-integration.js"></script>
  <style>
    /* ===== ESTILOS ESPEC√çFICOS DO INDEX PRINCIPAL ===== */
    
    /* Contador discreto na navega√ß√£o */
    .stats-counter-nav {
      display: flex;
      align-items: baseline;
      gap: var(--space-1);
      padding: var(--space-2) var(--space-3);
      background: rgba(14, 165, 233, 0.1);
      border: 1px solid rgba(14, 165, 233, 0.2);
      border-radius: var(--radius-md);
      opacity: 0;
      transform: translateY(-10px);
      animation: slideUp 0.4s ease-out 0.3s both;
    }

    .counter-number-small {
      font-size: var(--text-sm);
      font-weight: var(--font-bold);
      color: var(--brand-primary);
      line-height: 1;
    }

    .counter-label-small {
      font-size: var(--text-xs);
      font-weight: var(--font-medium);
      color: var(--neutral-500);
      text-transform: lowercase;
    }

    /* Responsividade do contador na nav */
    @media (max-width: 768px) {
      .stats-counter-nav {
        padding: var(--space-1) var(--space-2);
      }

      .counter-number-small {
        font-size: var(--text-xs);
      }

      .counter-label-small {
        font-size: 10px;
      }
    }

    @media (max-width: 640px) {
      .nav-content {
        flex-direction: column;
        gap: var(--space-2);
      }
      
      .stats-counter-nav {
        order: -1;
        align-self: flex-end;
      }
    }
    
    /* Hero Section Moderna */
    .hero {
      background: var(--gradient-hero);
      position: relative;
      overflow: hidden;
      padding: var(--space-16) 0 var(--space-20);
      min-height: 60vh;
      display: flex;
      align-items: center;
    }

  .hero::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grid" width="10" height="10" patternUnits="userSpaceOnUse"><path d="M 10 0 L 0 0 0 10" fill="none" stroke="rgba(255,255,255,0.05)" stroke-width="0.5"/></pattern></defs><rect width="100" height="100" fill="url(%23grid)"/></svg>');
  opacity: 0.3;
  }

  .hero-content {
  position: relative;
  z-index: 2;
  text-align: center;
  max-width: 800px;
  margin: 0 auto;
  }

  .hero-logos {
  display: flex;
  justify-content: center;
  align-items: center;
  gap: var(--space-6);
  margin-bottom: var(--space-8);
  animation: slideUp 0.8s ease-out;
  }

  .hero-logo {
  width: 80px;
  height: 80px;
  border-radius: var(--radius-xl);
  object-fit: contain;
  padding: var(--space-2);
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.2);
  box-shadow: var(--shadow-glass);
  transition: all var(--transition-base);
  }

  .hero-logo:hover {
  transform: translateY(-4px) scale(1.05);
  box-shadow: var(--shadow-xl);
  }

  .hero-title {
  font-size: var(--text-5xl);
  font-weight: var(--font-extrabold);
  color: var(--neutral-900);
  margin-bottom: var(--space-4);
  line-height: var(--leading-tight);
  animation: slideUp 0.8s ease-out 0.2s both;
  }

  .hero-subtitle {
  font-size: var(--text-xl);
  color: var(--neutral-600);
  margin-bottom: var(--space-8);
  line-height: var(--leading-relaxed);
  animation: slideUp 0.8s ease-out 0.4s both;
  }

  .hero-description {
  font-size: var(--text-lg);
  color: var(--neutral-500);
  max-width: 600px;
  margin: 0 auto var(--space-12);
  line-height: var(--leading-relaxed);
  animation: slideUp 0.8s ease-out 0.6s both;
  }

  /* Navega√ß√£o Moderna */
  .nav-header {
  position: sticky;
  top: 0;
  z-index: var(--z-sticky);
  background: rgba(255, 255, 255, 0.8);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid var(--neutral-200);
  padding: var(--space-4) 0;
  transition: all var(--transition-base);
  }

  @media (prefers-color-scheme: dark) {
  .nav-header {
  background: rgba(15, 23, 42, 0.8);
  border-bottom-color: var(--neutral-700);
  }
  }

  .nav-content {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: var(--space-4);
  }

  .nav-brand {
  display: flex;
  align-items: center;
  gap: var(--space-3);
  }

  .nav-logo {
  width: 40px;
  height: 40px;
  border-radius: var(--radius-lg);
  object-fit: contain;
  padding: var(--space-1);
  background: var(--surface);
  box-shadow: var(--shadow-sm);
  }

  .nav-title {
  font-size: var(--text-lg);
  font-weight: var(--font-bold);
  color: var(--brand-primary);
  margin: 0;
  }

  .nav-actions {
  display: flex;
  gap: var(--space-2);
  }

  .btn-nav {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-4);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  text-decoration: none;
  border: 1px solid var(--neutral-200);
  background: var(--surface);
  color: var(--brand-primary);
  transition: all var(--transition-base);
  }

  .btn-nav:hover {
  background: var(--neutral-50);
  border-color: var(--brand-accent);
  transform: translateY(-1px);
  }

  .btn-nav.hidden {
  display: none;
  }

  /* Classe utilit√°ria para esconder elementos */
  .hidden {
  display: none !important;
  }

  /* Grid de Aplica√ß√µes Moderno */
  .apps-section {
  padding: var(--space-16) 0;
  background: var(--bg-primary);
  }

  .section-header {
  text-align: center;
  margin-bottom: var(--space-12);
  }

  .section-title {
  font-size: var(--text-3xl);
  font-weight: var(--font-bold);
  color: var(--neutral-900);
  margin-bottom: var(--space-4);
  }

  .section-description {
  font-size: var(--text-lg);
  color: var(--neutral-600);
  max-width: 600px;
  margin: 0 auto;
  line-height: var(--leading-relaxed);
  }

  .apps-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
  gap: var(--space-8);
  margin-bottom: var(--space-12);
  }

  .app-card {
  position: relative;
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
  padding: var(--space-8);
  border-radius: var(--radius-xl);
  background: var(--surface);
  border: 1px solid var(--neutral-200);
  cursor: pointer;
  text-align: left;
  transition: all var(--transition-base);
  overflow: hidden;
  animation: slideUp 0.6s ease-out;
  }

  .app-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--gradient-primary);
  transform: scaleX(0);
  transition: transform var(--transition-base);
  }

  .app-card:hover::before {
  transform: scaleX(1);
  }

  .app-card:hover {
  transform: translateY(-8px);
  border-color: var(--brand-accent);
  box-shadow: var(--shadow-xl);
  }

  .app-card:focus-visible {
  outline: none;
  box-shadow: 0 0 0 3px rgba(14, 165, 233, 0.3);
  }

  .app-icon {
  width: 72px;
  height: 72px;
  border-radius: var(--radius-xl);
  background: var(--gradient-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: var(--shadow-brand);
  animation: float 3s ease-in-out infinite;
  margin-bottom: var(--space-2);
  }

  .app-icon svg {
  width: 36px;
  height: 36px;
  color: white;
  }

  .app-title {
  font-size: var(--text-xl);
  font-weight: var(--font-bold);
  color: var(--neutral-900);
  margin-bottom: var(--space-2);
  }

  .app-description {
  font-size: var(--text-base);
  color: var(--neutral-600);
  line-height: var(--leading-relaxed);
  flex-grow: 1;
  }

  .app-badge {
  position: absolute;
  top: var(--space-4);
  right: var(--space-4);
  font-size: var(--text-xs);
  font-weight: var(--font-bold);
  letter-spacing: 0.05em;
  padding: var(--space-1) var(--space-3);
  border-radius: var(--radius-full);
  background: var(--gradient-primary);
  color: white;
  text-transform: uppercase;
  }

  /* Se√ß√£o de Ajuda */
  .help-section {
  background: var(--bg-secondary);
  padding: var(--space-12) 0;
  text-align: center;
  }

  .help-content {
  max-width: 600px;
  margin: 0 auto;
  }

  .help-title {
  font-size: var(--text-2xl);
  font-weight: var(--font-bold);
  color: var(--neutral-900);
  margin-bottom: var(--space-4);
  }

  .help-text {
  font-size: var(--text-base);
  color: var(--neutral-600);
  line-height: var(--leading-relaxed);
  margin-bottom: var(--space-6);
  }

  .keyboard-shortcuts {
  display: flex;
  justify-content: center;
  gap: var(--space-4);
  flex-wrap: wrap;
  }

  .shortcut {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-2) var(--space-3);
  background: var(--surface);
  border: 1px solid var(--neutral-200);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  color: var(--neutral-700);
  }

  .shortcut-key {
  font-family: var(--font-mono);
  font-weight: var(--font-bold);
  background: var(--neutral-100);
  padding: var(--space-1) var(--space-2);
  border-radius: var(--radius-sm);
  font-size: var(--text-xs);
  }

  /* Viewer Moderno */
  .viewer {
  margin-top: var(--space-6);
  }

  .viewer-toolbar {
  display: flex;
  gap: var(--space-3);
  align-items: center;
  justify-content: flex-end;
  padding: var(--space-4) 0;
  }

  .btn-toolbar {
  display: inline-flex;
  align-items: center;
  gap: var(--space-2);
  padding: var(--space-3) var(--space-4);
  border-radius: var(--radius-md);
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  text-decoration: none;
  border: 1px solid var(--neutral-200);
  background: var(--surface);
  color: var(--neutral-700);
  transition: all var(--transition-base);
  }

  .btn-toolbar:hover {
  background: var(--neutral-50);
  border-color: var(--neutral-300);
  }

  .btn-toolbar svg {
  width: 16px;
  height: 16px;
  }

  .frame-container {
  border: 1px solid var(--neutral-200);
  border-radius: var(--radius-xl);
  overflow: hidden;
  background: var(--neutral-50);
  box-shadow: var(--shadow-lg);
  }

  .app-frame {
  width: 100%;
  height: calc(100vh - 200px);
  border: 0;
  background: white;
  display: block;
  }

  /* Responsividade */
  @media (max-width: 768px) {
  .hero {
  padding: var(--space-12) 0 var(--space-16);
  min-height: 50vh;
  }

  .hero-title {
  font-size: var(--text-3xl);
  }

  .hero-subtitle {
  font-size: var(--text-lg);
  }

  .hero-logos {
  gap: var(--space-4);
  }

  .hero-logo {
  width: 60px;
  height: 60px;
  }

  .apps-grid {
  grid-template-columns: 1fr;
  gap: var(--space-6);
  }

  .nav-content {
  flex-direction: column;
  gap: var(--space-3);
  }

  .keyboard-shortcuts {
  flex-direction: column;
  align-items: center;
  }
  }

  @media (max-width: 640px) {
  .hero-title {
  font-size: var(--text-2xl);
  }

  .section-title {
  font-size: var(--text-2xl);
  }

  .app-card {
  padding: var(--space-6);
  }

  .app-icon {
  width: 60px;
  height: 60px;
  }

  .app-icon svg {
  width: 30px;
  height: 30px;
  }
  }
  </style>
</head>

<body>
  <!-- Navega√ß√£o Moderna -->
  <nav class="nav-header">
    <div class="container">
      <div class="nav-content">
        <div class="nav-brand">
          <img src="./assets/pm.png" alt="Pague Menos" class="nav-logo" onerror="this.style.display='none'">
          <img src="./assets/logo.png" alt="Danilo" class="nav-logo" onerror="this.style.display='none'">
          <h1 class="nav-title">Hub de Etiquetas</h1>
        </div>
        <div class="nav-actions">
          <div class="stats-counter-nav">
            <span class="counter-number-small" id="etiquetas-counter">19.452</span>
            <span class="counter-label-small">etiquetas geradas üöÄ</span>
          </div>
        </div>
      </div>
    </div>
  </nav>

  <!-- Hero Section -->
  <section id="hero" class="hero">
    <div class="container">
      <div class="hero-content">
        <div class="hero-logos">
          <img src="./assets/pm.png" alt="Pague Menos" class="hero-logo" onerror="this.style.display='none'">
          <img src="./assets/logo.png" alt="Danilo" class="hero-logo" onerror="this.style.display='none'">
        </div>
        <h1 class="hero-title">Hub de Etiquetas</h1>
        <p class="hero-subtitle">Sistema Integrado de Gera√ß√£o de Etiquetas</p>
        <p class="hero-description">
          Plataforma completa para gera√ß√£o de etiquetas.
          Acesse todas as aplica√ß√µes de forma r√°pida e intuitiva.
        </p>
      </div>
    </div>
  </section>

  <!-- Se√ß√£o de Aplica√ß√µes -->
  <section id="chooser" class="apps-section">
    <div class="container">
      <div class="section-header">
        <h2 class="section-title">Escolha sua Aplica√ß√£o</h2>
        <p class="section-description">
          Selecione a aplica√ß√£o desejada para come√ßar a gerar suas etiquetas
        </p>
      </div>
      <div id="apps" class="apps-grid" role="list"></div>

      <!-- Se√ß√£o de Ajuda -->
      <div class="help-section">
        <div class="help-content">
          <h3 class="help-title">Atalhos de Teclado</h3>
          <p class="help-text">Use os atalhos abaixo para acesso r√°pido √†s aplica√ß√µes</p>
          <div class="keyboard-shortcuts">
            <div class="shortcut">
              <span class="shortcut-key">Ctrl+1</span>
              <span>Etiquetas de Produto</span>
            </div>
            <div class="shortcut">
              <span class="shortcut-key">Ctrl+2</span>
              <span>Etiquetas de Caixa</span>
            </div>
            <div class="shortcut">
              <span class="shortcut-key">Ctrl+3</span>
              <span>Volume Avulso</span>
            </div>
            <div class="shortcut">
              <span class="shortcut-key">Ctrl+4</span>
              <span>Endere√ßamento</span>
            </div>
            <div class="shortcut">
              <span class="shortcut-key">Ctrl+5</span>
              <span>Transfer√™ncia</span>
            </div>
            <div class="shortcut">
              <span class="shortcut-key">Ctrl+6</span>
              <span>Termol√°beis</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Viewer removido - aplica√ß√µes sempre abrem em nova aba -->

  <script>
    // ===== Defini√ß√£o dos apps: caminhos que voc√™ J√Å usa =====
    const APPS = [
      { id: 'placas', name: 'Etiquetas de Produto', desc: 'C√≥digos de barras com legenda para produtos', path: './placas/', hotkey: '1', icon: 'barcode' },
      { id: 'caixa', name: 'Etiquetas de Caixa', desc: 'Etiquetas para caixas padr√£o com rotulagem', path: './caixa/', hotkey: '2', icon: 'box' },
      { id: 'avulso', name: 'Volume Avulso', desc: 'Etiquetas individuais por volume', path: './avulso/', hotkey: '3', icon: 'layers' },
      { id: 'enderec', name: 'Endere√ßamento', desc: 'Etiquetas de endere√ßo para invent√°rio', path: './enderec/', hotkey: '4', icon: 'map' },
      { id: 'transfer', name: 'Transfer√™ncia CD ‚Üí CD', desc: 'Documentos A4 para transfer√™ncias', path: './transferencia/', hotkey: '5', icon: 'truck' },
      { id: 'termo', name: 'Termol√°beis', desc: 'M√≥dulo especializado para produtos termol√°beis', path: './termo/', hotkey: '6', icon: 'thermo' },
    ];

    // ===== √çcones modernos inline =====
    const ICONS = {
      box: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7l9 4 9-4"/><path d="M3 7l9-4 9 4v10l-9 4-9-4z"/></svg>',
      barcode: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 6v12"/><path d="M7 6v12"/><path d="M10 6v12"/><path d="M12 6v12"/><path d="M15 6v12"/><path d="M18 6v12"/><path d="M20 6v12"/></svg>',
      layers: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l9 5-9 5-9-5 9-5z"/><path d="M3 12l9 5 9-5"/><path d="M3 17l9 5 9-5"/></svg>',
      map: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M1 6l7-3 8 3 7-3v15l-7 3-8-3-7 3z"/><path d="M8 3v15"/><path d="M16 6v15"/></svg>',
      truck: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 7h12v8H3z"/><path d="M15 10h4l2 3v2h-6z"/><circle cx="7.5" cy="17.5" r="2.5"/><circle cx="17.5" cy="17.5" r="2.5"/></svg>',
      thermo: '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2a2 2 0 0 1 2 2v8a5 5 0 1 1-4 0V4a2 2 0 0 1 2-2z"/><path d="M12 9v8"/></svg>',
    };

    const $ = (s) => document.querySelector(s);
    const grid = $('#apps');
    const chooser = $('#chooser');
    const hero = $('#hero');

    // ===== Sistema de Contador de Etiquetas =====
    const EtiquetasCounter = {
      defaultValue: window.ContadorConfig?.valorInicial || 19452,
      storageKey: 'hub-etiquetas-count',
      
      get githubUrl() {
        return window.ContadorConfig?.githubRawUrl || null;
      },
      
      async init() {
        try {
          // Inicializa o valor se n√£o existir
          if (!localStorage.getItem(this.storageKey)) {
            this.setValue(this.defaultValue);
          }
          
          // Tenta carregar do GitHub primeiro
          await this.syncFromGitHub();
          this.updateDisplay();
          console.log('üìä Contador de etiquetas inicializado com valor:', this.getValue());
        } catch (error) {
          console.error('Erro ao inicializar contador:', error);
          this.showFallback();
        }
      },

      async syncFromGitHub() {
        const url = this.githubUrl;
        if (!url || url.includes('SEU_USUARIO')) {
          console.log('‚ÑπÔ∏è Sincroniza√ß√£o GitHub n√£o configurada - usando modo local');
          return;
        }
        
        try {
          const response = await fetch(url + '?t=' + Date.now());
          if (response.ok) {
            const data = await response.json();
            const githubTotal = data.totalEtiquetas || this.defaultValue;
            
            // Compara com valor local
            const localTotal = this.getValue();
            
            // Usa o maior valor (evita regress√£o)
            const finalTotal = Math.max(githubTotal, localTotal);
            
            if (finalTotal !== localTotal) {
              this.setValue(finalTotal);
              console.log(`üîÑ Sincronizado com GitHub: ${finalTotal}`);
            }
          }
        } catch (error) {
          console.warn('N√£o foi poss√≠vel sincronizar com GitHub:', error);
        }
      },

      getValue() {
        try {
          const stored = localStorage.getItem(this.storageKey);
          if (stored) {
            const data = JSON.parse(stored);
            return data.totalCount || this.defaultValue;
          }
        } catch (error) {
          console.warn('Erro ao ler localStorage, usando valor padr√£o:', error);
        }
        return this.defaultValue;
      },

      setValue(value) {
        try {
          const data = {
            totalCount: value,
            lastUpdated: Date.now(),
            breakdown: {
              placas: 0,
              caixa: 0,
              avulso: 0,
              enderec: 0,
              transfer: 0,
              termo: 0
            }
          };
          localStorage.setItem(this.storageKey, JSON.stringify(data));
          return true;
        } catch (error) {
          console.warn('Erro ao salvar no localStorage:', error);
          return false;
        }
      },

      formatNumber(num) {
        try {
          // Converte para n√∫mero se for string
          const number = typeof num === 'string' ? parseFloat(num) : num;
          
          if (isNaN(number)) {
            return this.formatNumber(this.defaultValue);
          }

          // Formata com separador de milhares brasileiro (ponto)
          return number.toLocaleString('pt-BR', {
            minimumFractionDigits: 0,
            maximumFractionDigits: 0
          });
        } catch (error) {
          console.warn('Erro na formata√ß√£o, usando fallback:', error);
          return Math.floor(num).toString();
        }
      },

      updateDisplay() {
        const counterElement = $('#etiquetas-counter');
        if (!counterElement) {
          console.warn('Elemento contador n√£o encontrado');
          return;
        }

        const currentValue = this.getValue();
        const formattedValue = this.formatNumber(currentValue);
        
        counterElement.textContent = formattedValue;
        
        // Salva o valor atual se ainda n√£o existe no storage
        if (!localStorage.getItem(this.storageKey)) {
          this.setValue(this.defaultValue);
        }
      },

      showFallback() {
        const counterElement = $('#etiquetas-counter');
        if (counterElement) {
          counterElement.textContent = this.formatNumber(this.defaultValue);
        }
      },

      // M√©todo para futuras atualiza√ß√µes autom√°ticas
      async increment(amount = 1) {
        try {
          const current = this.getValue();
          const newValue = current + amount;
          
          if (this.setValue(newValue)) {
            this.updateDisplay();
            
            // Tenta reportar para um servi√ßo externo (opcional)
            this.reportToExternal(amount, newValue);
            
            console.log(`üìà Contador atualizado: +${amount} (Total: ${this.formatNumber(newValue)})`);
            
            // Anima√ß√£o visual no contador
            this.animateCounter();
            
            return newValue;
          } else {
            console.error('‚ùå Falha ao salvar novo valor do contador');
            return current;
          }
        } catch (error) {
          console.error('‚ùå Erro ao incrementar contador:', error);
          return this.getValue();
        }
      },

      // Anima√ß√£o visual do contador
      animateCounter() {
        const counterElement = document.getElementById('etiquetas-counter');
        if (counterElement) {
          counterElement.style.transform = 'scale(1.1)';
          counterElement.style.color = '#10b981';
          
          setTimeout(() => {
            counterElement.style.transform = 'scale(1)';
            counterElement.style.color = '';
          }, 300);
        }
      },

      async reportToExternal(amount, total) {
        try {
          // Voc√™ pode configurar um webhook aqui
          // Por exemplo: Zapier, IFTTT, ou um servi√ßo pr√≥prio
          const webhookUrl = 'https://hooks.zapier.com/hooks/catch/SEU_WEBHOOK/'; // Configure se quiser
          
          if (webhookUrl && !webhookUrl.includes('SEU_WEBHOOK')) {
            await fetch(webhookUrl, {
              method: 'POST',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify({
                incremento: amount,
                total: total,
                timestamp: new Date().toISOString(),
                origem: window.location.href
              })
            });
          }
        } catch (error) {
          console.warn('N√£o foi poss√≠vel reportar para servi√ßo externo:', error);
        }
      },

      // M√©todo p√∫blico para ser chamado pelas aplica√ß√µes
      addEtiquetas(quantidade) {
        return this.increment(quantidade);
      }
    };

    // ===== API GLOBAL PARA AS APLICA√á√ïES =====
    // Exp√µe o contador globalmente para que as aplica√ß√µes possam usar
    window.HubEtiquetas = {
      // Fun√ß√£o para incrementar o contador de qualquer aplica√ß√£o
      incrementarContador: function(quantidade = 1) {
        try {
          console.log(`üîÑ API: Incrementando contador +${quantidade}`);
          
          if (typeof EtiquetasCounter === 'undefined') {
            console.warn('‚ùå Sistema de contador n√£o dispon√≠vel');
            return null;
          }
          
          // Valida a quantidade
          const qtd = parseInt(quantidade) || 1;
          if (qtd <= 0) {
            console.warn('‚ö†Ô∏è Quantidade inv√°lida, usando 1');
            qtd = 1;
          }
          
          const resultado = EtiquetasCounter.addEtiquetas(qtd);
          console.log(`‚úÖ Contador incrementado! +${qtd} (Total: ${resultado})`);
          
          return resultado;
        } catch (error) {
          console.error('‚ùå Erro na API incrementarContador:', error);
          return null;
        }
      },
      
      // Fun√ß√£o para obter o valor atual
      obterTotal: function() {
        try {
          if (typeof EtiquetasCounter === 'undefined') {
            console.warn('‚ùå Sistema de contador n√£o dispon√≠vel para obter total');
            return 0;
          }
          
          const total = EtiquetasCounter.getValue();
          console.log(`üìä Total atual: ${total}`);
          return total;
        } catch (error) {
          console.error('‚ùå Erro ao obter total:', error);
          return 0;
        }
      },
      
      // Fun√ß√£o para verificar se o sistema est√° dispon√≠vel
      disponivel: function() {
        return typeof EtiquetasCounter !== 'undefined';
      },
      
      // Fun√ß√£o de teste (DESABILITADA EM PRODU√á√ÉO)
      testar: function() {
        console.warn('üö´ Fun√ß√£o de teste desabilitada em produ√ß√£o');
        return this.obterTotal();
      }
    };

    // ===================== SEMPRE INICIAR NO HUB =====================
    const ALWAYS_START_IN_HUB = true;
    // =================================================================

    function cardHTML(app, index) {
      const icon = ICONS[app.icon] || ICONS.box;
      return `
        <button class="app-card" data-id="${app.id}" data-path="${app.path}" role="listitem" aria-label="${app.name}" style="animation-delay: ${index * 0.1}s">
          <div class="app-icon">
            ${icon}
          </div>
          <h3 class="app-title">${app.name}</h3>
          <p class="app-description">${app.desc || ''}</p>
          <span class="app-badge">Ctrl+${app.hotkey || ''}</span>
        </button>
      `;
    }

    function renderCards() {
      try {
        grid.innerHTML = APPS.map((app, index) => cardHTML(app, index)).join('');
      } catch (e) {
        console.error('Erro ao renderizar cards', e);
      }
    }

    function openById(id) {
      const app = APPS.find(a => a.id === id);
      if (!app) return;

      const url = app.path.endsWith('/') ? app.path + 'index.html' : app.path;
      
      // Abre na mesma guia
      window.location.href = url;
    }

    // Fun√ß√£o n√£o mais necess√°ria - aplica√ß√µes sempre abrem em nova aba

    // Event Listeners
    grid.addEventListener('click', (ev) => {
      const card = ev.target.closest('.app-card');
      if (!card) return;

      // Efeito de click
      card.style.transform = 'scale(0.95)';
      setTimeout(() => {
        card.style.transform = '';
        openById(card.dataset.id);
      }, 150);
    });

    // Event listeners removidos - aplica√ß√µes sempre abrem em nova aba

    // Hotkeys Ctrl+1..6
    document.addEventListener('keydown', (ev) => {
      const isCtrl = ev.ctrlKey || ev.metaKey;
      if (!isCtrl) return;
      const hit = APPS.find(a => a.hotkey === ev.key);
      if (hit) {
        ev.preventDefault();
        openById(hit.id);
      }
    });

    // Efeitos de hover nos cards
    function addCardEffects() {
      const cards = document.querySelectorAll('.app-card');
      cards.forEach(card => {
        card.addEventListener('mouseenter', () => {
          card.style.transform = 'translateY(-8px)';
        });

        card.addEventListener('mouseleave', () => {
          card.style.transform = '';
        });
      });
    }

    // Inicializa√ß√£o
    function boot() {
      console.log('üöÄ Iniciando Hub de Etiquetas...');
      
      // Inicializa contador de etiquetas
      EtiquetasCounter.init();
      
      renderCards();
      addCardEffects();

      if (ALWAYS_START_IN_HUB) {
        console.log('üì± Configurando exibi√ß√£o inicial...');
        
        // Estado inicial: Hero vis√≠vel, Chooser escondido
        hero.style.display = 'flex';
        hero.style.opacity = '1';
        hero.style.transform = 'translateY(0)';
        
        chooser.style.display = 'none';
        chooser.style.opacity = '0';
        
        console.log('‚è∞ Timer de 3 segundos iniciado...');
        
        // Ap√≥s 3 segundos, faz a transi√ß√£o
        setTimeout(() => {
          console.log('üîÑ Iniciando transi√ß√£o para escolha de aplica√ß√£o...');
          
          // Anima sa√≠da do hero
          hero.style.transition = 'all 0.4s ease-out';
          hero.style.opacity = '0';
          hero.style.transform = 'translateY(-30px)';
          
          // Ap√≥s anima√ß√£o do hero, mostra chooser
          setTimeout(() => {
            console.log('‚úÖ Mostrando se√ß√£o de escolha de aplica√ß√£o');
            
            // Esconde hero e mostra chooser
            hero.style.display = 'none';
            chooser.style.display = 'block';
            chooser.style.opacity = '0';
            chooser.style.transform = 'translateY(30px)';
            chooser.style.transition = 'all 0.4s ease-out';
            
            // Anima entrada do chooser
            setTimeout(() => {
              chooser.style.opacity = '1';
              chooser.style.transform = 'translateY(0)';
              
              // Limpa estilos ap√≥s anima√ß√£o
              setTimeout(() => {
                hero.style.transition = '';
                chooser.style.transition = '';
              }, 400);
            }, 50);
            
          }, 400);
        }, 3000);
      }
    }

    // Inicializar quando o DOM estiver pronto
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', boot);
    } else {
      boot();
    }
  </script>
</body>

</html>