<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste - Quantidade >= 8</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .test-result { margin: 10px 0; padding: 10px; background: #f5f5f5; border-radius: 3px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        .warning { background: #fff3cd; color: #856404; }
        .sequence-demo { display: grid; grid-template-columns: repeat(8, 1fr); gap: 5px; margin: 15px 0; font-size: 12px; }
        .label-demo { 
            border: 1px solid #333; 
            padding: 8px; 
            text-align: center; 
            font-weight: bold; 
            background: white;
        }
        .correct { border-color: #28a745; background: #d4edda; }
        .incorrect { border-color: #dc3545; background: #f8d7da; }
        .repeated { border-color: #ffc107; background: #fff3cd; }
        button { padding: 10px 20px; margin: 5px; background: #007bff; color: white; border: none; border-radius: 3px; cursor: pointer; }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <h1>ğŸš¨ Teste - Problema com Quantidade >= 8</h1>
    
    <div class="test-section">
        <h2>ğŸ” Problema EspecÃ­fico Identificado</h2>
        <div class="test-result error">
            <p><strong>CondiÃ§Ã£o do Erro:</strong></p>
            <ul>
                <li>âœ… Quantidade >= 8</li>
                <li>âœ… Tipo = "Somente Interna"</li>
                <li>âœ… Qualquer quantidade de cÃ³pias</li>
            </ul>
            <p><strong>Sintoma:</strong> A partir da 8Âª quantidade, a sequÃªncia comeÃ§a a se repetir</p>
        </div>
    </div>

    <div class="test-section">
        <h2>âŒ SequÃªncia Incorreta (Da Imagem)</h2>
        <div class="test-result error">
            <p><strong>Base: 082545, Quantidade: 8, CÃ³pias: 2</strong></p>
            <p><strong>SequÃªncia Observada (Incorreta):</strong></p>
            <div class="sequence-demo">
                <div class="label-demo correct">2545</div>
                <div class="label-demo correct">2545</div>
                <div class="label-demo correct">2546</div>
                <div class="label-demo correct">2546</div>
                <div class="label-demo correct">2547</div>
                <div class="label-demo correct">2547</div>
                <div class="label-demo correct">2548</div>
                <div class="label-demo correct">2548</div>
                <div class="label-demo correct">2549</div>
                <div class="label-demo correct">2549</div>
                <div class="label-demo correct">2550</div>
                <div class="label-demo correct">2550</div>
                <div class="label-demo correct">2551</div>
                <div class="label-demo correct">2551</div>
                <div class="label-demo correct">2552</div>
                <div class="label-demo correct">2552</div>
                <div class="label-demo repeated">2550</div>
                <div class="label-demo repeated">2550</div>
                <div class="label-demo repeated">2551</div>
                <div class="label-demo repeated">2551</div>
                <div class="label-demo repeated">2552</div>
                <div class="label-demo repeated">...</div>
            </div>
            <p>âŒ <strong>Problema:</strong> ApÃ³s as 16 primeiras etiquetas corretas, comeÃ§a a repetir 2550, 2551, 2552...</p>
        </div>
    </div>

    <div class="test-section">
        <h2>âœ… SequÃªncia Correta Esperada</h2>
        <div class="test-result success">
            <p><strong>Base: 082545, Quantidade: 8, CÃ³pias: 2 = 16 etiquetas</strong></p>
            <div class="sequence-demo">
                <div class="label-demo correct">2545</div>
                <div class="label-demo correct">2545</div>
                <div class="label-demo correct">2546</div>
                <div class="label-demo correct">2546</div>
                <div class="label-demo correct">2547</div>
                <div class="label-demo correct">2547</div>
                <div class="label-demo correct">2548</div>
                <div class="label-demo correct">2548</div>
                <div class="label-demo correct">2549</div>
                <div class="label-demo correct">2549</div>
                <div class="label-demo correct">2550</div>
                <div class="label-demo correct">2550</div>
                <div class="label-demo correct">2551</div>
                <div class="label-demo correct">2551</div>
                <div class="label-demo correct">2552</div>
                <div class="label-demo correct">2552</div>
            </div>
            <p>âœ… <strong>Total:</strong> Exatamente 16 etiquetas, sem repetiÃ§Ãµes!</p>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ”§ CorreÃ§Ã£o Implementada</h2>
        <div class="test-result success">
            <h3>ğŸš¨ Modo Anti-RepetiÃ§Ã£o Ativado</h3>
            <ul>
                <li>Limpeza completa do preview antes de comeÃ§ar</li>
                <li>Reset do contador de operaÃ§Ãµes</li>
                <li>Controle rigoroso da sequÃªncia com array de debug</li>
                <li>VerificaÃ§Ã£o de integridade no final</li>
                <li>Logs detalhados para cada etapa</li>
                <li>Delay reduzido para evitar problemas de timing</li>
            </ul>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ§ª CenÃ¡rios de Teste</h2>
        
        <div class="test-result warning">
            <h3>Teste 1: Quantidade = 7 (Deve Funcionar)</h3>
            <p><strong>Config:</strong> Base: 1000, Qtd: 7, CÃ³pias: 2, Tipo: Interna</p>
            <p><strong>Esperado:</strong> 14 etiquetas (1000 atÃ© 1006, 2 cÃ³pias cada)</p>
            <button onclick="testarQtd7()">ğŸ§ª Testar Qtd = 7</button>
        </div>

        <div class="test-result error">
            <h3>Teste 2: Quantidade = 8 (Problema Original)</h3>
            <p><strong>Config:</strong> Base: 082545, Qtd: 8, CÃ³pias: 2, Tipo: Interna</p>
            <p><strong>Esperado:</strong> 16 etiquetas (2545 atÃ© 2552, 2 cÃ³pias cada)</p>
            <button onclick="testarQtd8()">ğŸ§ª Testar Qtd = 8</button>
        </div>

        <div class="test-result error">
            <h3>Teste 3: Quantidade = 10 (Teste Maior)</h3>
            <p><strong>Config:</strong> Base: 3000, Qtd: 10, CÃ³pias: 1, Tipo: Interna</p>
            <p><strong>Esperado:</strong> 10 etiquetas (3000 atÃ© 3009)</p>
            <button onclick="testarQtd10()">ğŸ§ª Testar Qtd = 10</button>
        </div>
    </div>

    <div class="test-section">
        <h2>ğŸ” Como Verificar a CorreÃ§Ã£o</h2>
        <ol>
            <li>Abra a aplicaÃ§Ã£o caixa (index.html)</li>
            <li>Configure: Base: 082545, Quantidade: 8, CÃ³pias: 2</li>
            <li>Selecione "Somente Interna"</li>
            <li>Abra o Console (F12) ANTES de gerar</li>
            <li>Clique em "Gerar"</li>
            <li>Observe no console:</li>
            <ul>
                <li>"ğŸš¨ MODO ANTI-REPETIÃ‡ÃƒO ATIVADO"</li>
                <li>"âœ… VERIFICAÃ‡ÃƒO OK: Quantidade correta!"</li>
                <li>SequÃªncia final sem repetiÃ§Ãµes</li>
            </ul>
            <li>Conte visualmente: deve ter exatamente 16 etiquetas</li>
        </ol>
    </div>

    <script>
        function testarQtd7() {
            alert('ğŸ§ª TESTE QUANTIDADE = 7\\n\\nConfigure na aplicaÃ§Ã£o:\\n\\nBase: 1000\\nQuantidade: 7\\nCÃ³pias: 2\\nTipo: Somente Interna\\n\\nâœ… Esperado: 14 etiquetas\\nSequÃªncia: 1000, 1000, 1001, 1001, ..., 1006, 1006\\n\\nğŸ“ Este deve funcionar normalmente');
        }

        function testarQtd8() {
            alert('ğŸ§ª TESTE QUANTIDADE = 8 (PROBLEMA ORIGINAL)\\n\\nConfigure na aplicaÃ§Ã£o:\\n\\nBase: 082545\\nQuantidade: 8\\nCÃ³pias: 2\\nTipo: Somente Interna\\n\\nâœ… Esperado: 16 etiquetas\\nSequÃªncia: 2545, 2545, 2546, 2546, ..., 2552, 2552\\n\\nğŸ” Observe o console para "MODO ANTI-REPETIÃ‡ÃƒO"!');
        }

        function testarQtd10() {
            alert('ğŸ§ª TESTE QUANTIDADE = 10 (MAIOR)\\n\\nConfigure na aplicaÃ§Ã£o:\\n\\nBase: 3000\\nQuantidade: 10\\nCÃ³pias: 1\\nTipo: Somente Interna\\n\\nâœ… Esperado: 10 etiquetas\\nSequÃªncia: 3000, 3001, 3002, ..., 3009\\n\\nğŸ“Š Teste de stress para quantidades maiores');
        }
    </script>

</body>
</html>